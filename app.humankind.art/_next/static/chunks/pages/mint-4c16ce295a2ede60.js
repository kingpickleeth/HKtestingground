(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{17537:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(74939)}])},5902:function(e,t,n){"use strict";function a(e,t,n){return Math.max(t,Math.min(e,n))}n.d(t,{u:function(){return a}})},81043:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var a=n(85893),i=n(67294),s=n(62637),r=n(80987);let l=e=>{let{children:t,enabled:n}=e,[l,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(.2),[c]=(0,r.cT)("/sounds/typewriter.mp3",{volume:d});if(!n)return(0,a.jsx)(a.Fragment,{children:t});let p=()=>{o(!0)};return(0,a.jsx)(s.rf,{words:[t],loop:1,cursor:!l,cursorStyle:"_",typeSpeed:50,deleteSpeed:50,delaySpeed:1e3,onLoopDone:p,onType(){c(),u(0===d?.05*Math.random()+.05:0)}})}},74939:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eS}});var a=n(85893),i=n(67294),s=n(65820),r=n(10574),l=n(1249),o=n(18623),d=n(40970),u=n(43984),c=n(94184),p=n.n(c),m=n(58408),y=n(8100),h=n(8783),x=n(22192),f=n(7257),g=n(89447);function v(e){let{address:t}=(0,u.a)(),{data:n,isLoading:a}=(0,m.do)({abi:f.M,address:x.ez,functionName:"tokensOfOwner",args:[t],enabled:!!t,chainId:x.Kj}),s=null==n?void 0:n.map(e=>e.toNumber()).sort((e,t)=>e-t);e&&s&&s.length>e&&(s=s.slice(-e));let r=(null==s?void 0:s.length)&&!a,{data:l,error:o}=(0,y.ZP)(r?"/api/metadata/batchGet?tokenIds=".concat(s.join(",")):null,h._);return(0,i.useEffect)(()=>{l&&(0,g.a)(l.map(e=>{let{image:t}=e;return t}))},[l]),(r?!l&&!o&&a:a)?void 0:null!=l?l:[]}var b=n(92422);let w=i.forwardRef((e,t)=>{let{color:n="currentColor",style:i,...s}=e;return(0,a.jsx)("svg",{viewBox:"0 0 25 25",style:{width:24,height:24,...i},...s,ref:t,fill:n,xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M10.1563 18.75C9.94918 18.7472 9.75064 18.6671 9.59961 18.5254L4.13086 13.0566C4.00628 12.9048 3.94261 12.7121 3.95225 12.516C3.96188 12.3199 4.04412 12.1343 4.18298 11.9955C4.32183 11.8566 4.50737 11.7744 4.70351 11.7647C4.89964 11.7551 5.09235 11.8188 5.24414 11.9434L10.1563 16.8652L20.5371 6.47461C20.6889 6.35003 20.8816 6.28636 21.0777 6.296C21.2739 6.30563 21.4594 6.38787 21.5983 6.52673C21.7371 6.66558 21.8194 6.85112 21.829 7.04726C21.8386 7.24339 21.775 7.4361 21.6504 7.58789L10.7129 18.5254C10.5619 18.6671 10.3633 18.7472 10.1563 18.75Z",fill:n,stroke:n,strokeWidth:1})})});w.displayName="CheckIcon";var j=n(93595),T=n(96486),A=n(80987),N=n(21064);let k={TABLE:100,LUNCHBOX:200,TABLE_ITEMS:300},I={isDragging:!1,tableShakeTimestamp:Date.now(),selectedLunchboxId:null,lunchboxIds:[],lunchboxScenes:{},lunchboxRefs:(0,N.iH)({})},E=()=>{C.selectedLunchboxId=null,C.lunchboxIds=[],C.lunchboxScenes={},C.lunchboxRefs=(0,N.iH)({})},C=(0,N.sj)(I);var S=n(34860),O=n(35385),M=n(25675),L=n.n(M),R=n(81043);let z={enter:{opacity:0,scale:.5,transition:{type:"spring",duration:.7,bounce:.5,delay:.2}},center:{zIndex:1,opacity:1,scale:1,transition:{type:"spring",duration:.7,bounce:.5,delay:.2}},exit:{zIndex:0,transition:{duration:.14},opacity:0,scale:.7}},F=e=>{let{illustration:t,title:n,description:i,buttons:l,children:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center py-10 max-w-full w-[612px]",children:[(0,a.jsx)("div",{className:"flex items-center w-full max-w-[500px] mx-auto select-none",children:t&&(0,a.jsx)("div",{className:"h-[250px] flex grow relative z-10",children:(0,a.jsx)(s.M,{children:(0,a.jsx)(r.E.div,{variants:z,initial:"enter",animate:"center",exit:"exit",transition:{easing:"easeInOut"},className:p()("mb-6 absolute inset-0"),children:(0,a.jsx)("div",{children:(0,a.jsx)(L(),{src:t.image,alt:t.alt,layout:"fill",objectFit:"contain",priority:!0})})})})})}),(0,a.jsx)("h1",{className:"heading-h4",children:(0,a.jsx)(R.r,{children:n})}),(0,a.jsx)("p",{className:"body-default",children:i}),o,l&&(0,a.jsx)("div",{className:"flex gap-3 justify-center mt-4",children:l})]})};var B={src:"/_next/static/media/mint-error.4f28c007.jpg",height:298,width:434,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAFAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAgEAABAgUFAAAAAAAAAAAAAAABAAMCBAURMQcSEyEi/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ALB6sVYalMU2GdAkDfcxxA38A5yO0REH/9k=",blurWidth:8,blurHeight:5},D=n(41664),_=n.n(D);let P=e=>{let{onContinue:t}=e,n=v(),i=(0,S.RK)(C).lunchboxIds,{chain:s}=(0,m.LN)(),{switchNetwork:r}=(0,m.g0)(),{address:l}=(0,m.mA)(),o="pop-down",d=.3+.15*i.length,u={volume:.25,playbackRate:d},[c]=(0,A.cT)("/sounds/".concat(o,".mp3"),u),y=e=>{setTimeout(()=>{let t=null==n?void 0:n.find(e=>!C.lunchboxIds.includes(String(e.id)));t&&(C.lunchboxIds=[...C.lunchboxIds,String(t.id)],c(),y(e+1))},(0,T.clamp)(200-e**2,80,200))},h=()=>{n&&!(n.length<1)&&t()};return(null==s?void 0:s.id)!==x.Kj?(0,a.jsx)(O.Q,{isOpen:!0,children:(0,a.jsx)(F,{title:"Please connect to ETH Mainnet",description:(0,a.jsxs)(a.Fragment,{children:["You are currently connected to the wrong network.",(0,a.jsx)("br",{}),"Please switch to the correct network to mint."]}),illustration:{image:B,alt:"Error"},buttons:r?(0,a.jsx)(b.z,{variant:"secondary",size:"narrow",onClick:()=>r(x.Kj),children:"Switch Network"}):void 0})}):n?n.length<1?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"heading-h4 md:heading-h3 max-w-[430px]",children:"You filled up all your lunchboxes."}),(0,a.jsx)("div",{className:"body-large",children:"You used all your lunchboxes to feed humankinds."}),(0,a.jsxs)("div",{className:"flex space-x-3 mt-3 mb-24",children:[(0,a.jsx)(b.z,{href:"https://opensea.io/collection/humankind-lunchboxes",target:"_blank",rel:"noopener noreferrer",className:"whitespace-pre",size:"responsive",children:"Get a Lunchbox"}),(0,a.jsx)(_(),{href:"/profile/".concat(l),passHref:!0,children:(0,a.jsx)(b.z,{variant:"secondary",className:"whitespace-pre",size:"responsive",children:"View Humankinds"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"heading-h4 md:heading-h3 max-w-[430px]",children:"Your kind needs a lunchbox for the adventure!"}),(0,a.jsx)("div",{className:"body-large",children:"Select a lunchbox to feed your kind!"}),(0,a.jsx)("div",{className:p()("fixed z-30 bottom-0 inset-x-0 duration-300 transition-transform bg-white/90 footer-shadow"),children:(0,a.jsxs)("div",{className:"h-16 md:h-auto flex items-center justify-between gap-4 px-3 sm:px-6 py-3 w-full max-w-[923px] mx-auto",children:[(0,a.jsx)("div",{className:"component-responsive md:heading-h4 text-left md:text-center flex gap-1 items-center",children:(0,a.jsx)(a.Fragment,{children:1===n.length?"1 Lunchbox":(0,a.jsxs)(a.Fragment,{children:[Boolean(i.length)&&i.length,i.length>0&&(0,a.jsx)("span",{className:"hidden md:flex",children:1===i.length?"Lunchbox":"Lunchboxes"}),(0,a.jsxs)("span",{children:[i.length>0&&"Selected",0===i.length&&"Select a Lunchbox"]})]})})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[n.length>1&&(0,a.jsx)(b.z,{onClick:()=>y(0),variant:"secondary",className:"whitespace-pre hidden md:flex",size:"responsive",children:"Select All"}),Boolean(n.length<2||i.length>0)&&(0,a.jsxs)(b.z,{onClick:h,className:"whitespace-pre",size:"responsive",children:["Fill ",i.length>1?"them":"it"," up!"]})]})]})}),(0,a.jsx)("div",{className:"w-screen flex gap-6 justify-center flex-wrap px-12 mt-10 mb-[200px]",children:null==n?void 0:n.map(e=>{let t=String(e.id),s=i.includes(t);return(0,a.jsxs)(b.z,{variant:"secondary",rounded:!1,className:p()("flex-col relative flex-shrink-0",n.length>1?"w-[300px] h-[300px]":"w-[300px] h-[300px] lg:w-[425px] lg:h-[425px]"),size:"card",selected:s,mouseUpSound:s?"pop-up-off":"pop-up-on",mouseDownSound:o,mouseDownSoundOptions:u,mouseUpSoundOptions:u,onClick(){if(n.length<2){C.lunchboxIds=[t],h();return}C.lunchboxIds.includes(t)?C.lunchboxIds=C.lunchboxIds.filter(e=>e!==t):C.lunchboxIds=[...C.lunchboxIds,t]},children:[(0,a.jsx)("div",{className:"absolute inset-3 z-10 p-2 overflow-hidden pointer-events-none",children:(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full scale-[1.08] rounded-xl select-none"})}),n.length>1&&(0,a.jsx)("div",{className:p()("absolute top-3 right-3 rounded-full w-8 h-8 flex justify-center items-center transition z-20",s?"bg-black":"border-[3px] border-black"),children:(0,a.jsx)(w,{color:"white"})}),(0,a.jsxs)("div",{className:"font-sans font-bold -mt-12 z-20 absolute bottom-3 select-none",children:["Lunchbox #",e.id]})]},e.id)})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"heading-h4 md:heading-h3 max-w-[430px]",children:"Wait a little bit..."}),(0,a.jsx)("div",{className:"body-large",children:"We’re looking for the best lunchboxes."}),(0,a.jsx)(j.T,{className:"mt-4"})]})};var Q=n(33085);let U=e=>{let{scaleDuration:t}=e;return(0,a.jsx)(r.E.div,{className:"fixed inset-0 z-modal bg-black flex justify-center items-center",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:"easeOut"},children:(0,a.jsxs)("div",{className:"flex flex-col w-[500px] max-w-[80vw] text-center gap-4 justify-center items-center",children:[(0,a.jsx)(r.E.img,{src:"/zzz.svg",className:"w-full h-[370px] -mr-[36%] max-w-full mb-[10vh]",initial:{scale:1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:1},transition:{scale:{duration:t},opacity:{duration:t},ease:"easeOut"},style:{transformOrigin:"30% 80%"}}),(0,a.jsx)("div",{className:"text-white body-large w-[360px] max-w-full pointer-events-auto",children:"It’s good to have you back here. You’ll need to connect your wallet to proceed."}),(0,a.jsx)(Q.N,{connectedButtonOverride:null,variant:"secondary",children:"Connect Wallet"})]})})};var K=n(93968);let H=e=>{let{imageIsSmall:t,dontAnimate:n,scaleDuration:s}=e,[l]=(0,i.useState)(n?0:5);return(0,a.jsx)(r.E.div,{initial:{opacity:0,marginTop:t?60:0,marginBottom:t?40:0,scale:45},animate:{opacity:1,scale:1,marginTop:t?60:0,marginBottom:t?40:0,transition:{ease:"easeOut",duration:s}},exit:{opacity:0,transition:{ease:"easeOut",duration:1}},className:"relative z-10 w-[100vw] h-[10vh] md:h-[30vh] max-w-full flex justify-center items-center min-h-[240px] md:min-h-[480px] pt-8 md:pt-0 h-screen-fix overflow-visible",children:(0,a.jsxs)("div",{className:p()("relative w-full h-full flex justify-center",!t&&"min-w-[145vh]",t&&"max-w-[60vw] md:max-w-none"),children:[(0,a.jsx)("img",{src:(0,g.L)("connect-tree-house.png"),className:p()("absolute object-contain inset-0 w-full h-full"),alt:"Tree"}),(0,a.jsx)(K.U,{delay:l,children:(0,a.jsx)("img",{src:(0,g.L)("connect-tree-dallas.png"),className:p()("absolute object-contain inset-0 w-full h-full translate-x-[20%] md:translate-x-0"),alt:"Tree"})}),(0,a.jsx)(K.U,{delay:l+.5,children:(0,a.jsx)("img",{src:(0,g.L)("connect-tree-maya.png"),className:p()("absolute object-contain inset-0 w-full h-full translate-x-[20%] md:translate-x-0"),alt:"Tree"})}),(0,a.jsx)(K.U,{delay:l+.8,children:(0,a.jsx)("img",{src:(0,g.L)("connect-tree-yo.png"),className:p()("absolute object-contain inset-0 w-full h-full hidden md:block"),alt:"Tree"})})]})})};var W=n(46513),X=n(24697),Y=n(11163);let V=[{inputs:[{internalType:"address",name:"_lunchboxContract",type:"address"},{internalType:"string",name:"_baseUri",type:"string"},{internalType:"address",name:"_royaltyAddress",type:"address"},{internalType:"uint96",name:"_royaltyAmount",type:"uint96"},{internalType:"address",name:"_signer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AdventuringNotActive",type:"error"},{inputs:[],name:"ApprovalCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"ApprovalQueryForNonexistentToken",type:"error"},{inputs:[],name:"BalanceQueryForZeroAddress",type:"error"},{inputs:[],name:"InvalidLunchboxContract",type:"error"},{inputs:[],name:"InvalidQueryRange",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"InvalidSignerAddress",type:"error"},{inputs:[],name:"InvalidTokenId",type:"error"},{inputs:[],name:"KindIsAdventuring",type:"error"},{inputs:[],name:"MaxPerTransaction",type:"error"},{inputs:[],name:"MintERC2309QuantityExceedsLimit",type:"error"},{inputs:[],name:"MintToZeroAddress",type:"error"},{inputs:[],name:"MintZeroQuantity",type:"error"},{inputs:[],name:"NotOwnerOfToken",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"OperatorNotAllowed",type:"error"},{inputs:[],name:"OwnerQueryForNonexistentToken",type:"error"},{inputs:[],name:"OwnershipNotInitializedForExtraData",type:"error"},{inputs:[],name:"TransferCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"TransferFromIncorrectOwner",type:"error"},{inputs:[],name:"TransferToNonERC721ReceiverImplementer",type:"error"},{inputs:[],name:"TransferToZeroAddress",type:"error"},{inputs:[],name:"URIQueryForNonexistentToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint16",name:"tokenId",type:"uint16"}],name:"Adventuring",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"toTokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"ConsecutiveTransfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint16",name:"tokenId",type:"uint16"}],name:"ReturnedFromAdventure",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"uint256",name:"fromIndex",type:"uint256"},{indexed:!1,internalType:"uint256",name:"toIndex",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"OPERATOR_FILTER_REGISTRY",outputs:[{internalType:"contract IOperatorFilterRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_baseTokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"tokenId",type:"uint16"}],name:"adminEndAdventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"adminToggleAdventuring",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"adventuringData",outputs:[{components:[{internalType:"bool",name:"isAdventuring",type:"bool"},{internalType:"uint48",name:"adventureStartTime",type:"uint48"},{internalType:"uint48",name:"totalAdventureTime",type:"uint48"},{internalType:"uint48",name:"ownershipTime",type:"uint48"}],internalType:"struct AdventureData",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"explicitOwnershipOf",outputs:[{components:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"bool",name:"burned",type:"bool"},{internalType:"uint24",name:"extraData",type:"uint24"}],internalType:"struct IERC721A.TokenOwnership",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"explicitOwnershipsOf",outputs:[{components:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"bool",name:"burned",type:"bool"},{internalType:"uint24",name:"extraData",type:"uint24"}],internalType:"struct IERC721A.TokenOwnership[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getLunchboxForToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"getLunchboxesForTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"isAdventuringEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16[]",name:"tokenIds",type:"uint16[]"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"lunchTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lunchboxContract",outputs:[{internalType:"contract LunchboxContract",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_lunchboxContract",type:"address"}],name:"setLunchboxContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint96",name:"feeBasisPoints",type:"uint96"}],name:"setRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16[]",name:"tokenIds",type:"uint16[]"}],name:"toggleAdventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"tokensOfOwner",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"stop",type:"uint256"}],name:"tokensOfOwnerIn",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];var Z=n(50625),G=n(95348),J=n(30138),q={src:"/_next/static/media/mint-loading.3f4ec22a.gif",height:771,width:384},$={src:"/_next/static/media/mint-confirm.ac7abd82.gif",height:667,width:874},ee=n(57632);let et=()=>(0,ee.Z)().replace(/-/g,"");var en=n(24149);let ea=e=>{let t=Object.values(e).filter(e=>e).length;return t<3},ei=(e,t)=>{let n=C.lunchboxScenes[t];if(!n)return!1;let a=ea(n.selections);if(!a)return!1;n.selections[e]=!0},es=(e,t)=>{let n=C.lunchboxScenes[t];n&&(n.selections[e]=!1)},er=(e,t)=>{let n=e.top<t.bottom-t.height/4&&e.left<t.right-t.width/2&&e.right>t.left+t.width/2;return n},el=(e,t)=>{let n=e.getBoundingClientRect(),a=t.getBoundingClientRect();return er(n,a)},eo=e=>{let t=Object.values(e.selections).filter(e=>e).length;return 3===t},ed=en.Ev,eu=e=>{let t=(0,T.sampleSize)(ed,12).map((e,t)=>{let n=t%6;return{id:et(),item:e,x:10+t%6*12.5+(0,T.random)(-2,2),y:40+20*Math.floor(t/6)+(n>=2&&n<=3?14:0)+(0,T.random)(-2,2),exploded:!1}}),n=C.lunchboxScenes[e];if(n){let a=n.items.filter(e=>n.selections[e.id]),i=n.items.filter(e=>!n.selections[e.id]&&!e.exploded).map(e=>({...e,exploded:!0}));return n.items=[...t,...i,...a],i.length}return C.lunchboxScenes[e]={items:t,selections:{},dropIsActive:!1},0},ec=()=>{let e=Object.entries(C.lunchboxScenes).reduce((e,t)=>{let[n,a]=t,i=(0,T.keyBy)(a.items,"id"),s=Object.entries(a.selections).map(e=>{var t;let[a,s]=e;if(C.lunchboxIds.includes(n)&&s)return null===(t=i[a])||void 0===t?void 0:t.item}).filter(e=>null!=e);return s.length&&(e[n]=s),e},{});return e},ep=(0,i.forwardRef)((e,t)=>{let{item:n}=e;return(0,a.jsx)("img",{ref:t,src:"/lunchbox-items/".concat(n,".png"),className:"w-full h-full pointer-events-none object-contain",alt:n})});ep.displayName="LunchboxItemImage";let em=e=>{var t,n;let{lunchboxId:i,dragConstraints:s,animationControls:l}=e,o=null!==(n=null===(t=(0,S.RK)(C.lunchboxScenes)[i])||void 0===t?void 0:t.items)&&void 0!==n?n:[],d={shake:{y:["0%","-2%","0%"],rotate:[0,1,-1,.5,-.5,0],transition:{duration:.5}},rest:{y:0,rotate:0},exit:{scale:100}};return(0,a.jsx)(r.E.div,{initial:"rest",animate:l,variants:{shake:{transition:{staggerChildren:.01}},rest:{opacity:1},exit:{opacity:0}},className:"absolute inset-0 pointer-events-none",style:{zIndex:k.TABLE_ITEMS},children:o.map((e,t)=>(0,a.jsx)(r.E.div,{variants:d,className:"absolute inset-0 pointer-events-none",children:(0,a.jsx)(ey,{i:t,lunchboxId:i,itemId:e.id,dragConstraints:s})},"wrapper#".concat(i,"#").concat(e.id)))})},ey=e=>{var t,n,s,l;let{lunchboxId:o,dragConstraints:d,variants:u,itemId:c,i:m}=e,y=(0,S.RK)(C).isDragging,h=null===(t=(0,S.RK)(C.lunchboxScenes)[o])||void 0===t?void 0:t.items.find(e=>e.id===c),x=null!==(s=null===(n=(0,S.RK)(C.lunchboxScenes)[o])||void 0===n?void 0:n.selections)&&void 0!==s?s:{},f=Boolean(x[c]),g=(0,i.useRef)(null),[v]=(0,A.cT)("/sounds/rising-pops.mp3",{volume:.5,playbackRate:1+.2*Object.values(x).filter(e=>e).length}),[b]=(0,A.cT)("/sounds/typewriter.mp3",{volume:.5,playbackRate:1+.1*Object.values(x).filter(e=>e).length}),[w]=(0,A.cT)("/sounds/pop-down.mp3",{volume:.25}),[j]=(0,A.cT)("/sounds/switch-on.mp3",{volume:.25}),N=ea(x);return f||!h?null:(0,a.jsx)(r.E.div,{layoutId:"".concat(o,"#").concat(h.id),variants:u,dragConstraints:d,initial:{left:"".concat(h.x,"%"),top:"".concat(h.y,"%"),rotate:0,scale:0,opacity:N?1:.2},onMouseOver:()=>j(),onMouseDown:()=>w(),drag:N,dragTransition:{bounceStiffness:500,bounceDamping:50},animate:{left:h.exploded?"".concat(h.x+(h.x-50),"%"):"".concat(h.x,"%"),top:h.exploded?"-50%":"".concat(h.y,"%"),scale:[null,1.1,1],zIndex:null!==(l=k.LUNCHBOX+h.y)&&void 0!==l?l:0,opacity:h.exploded?0:N?1:.2,transition:{scale:{delay:.3,duration:h.exploded?.01:.5}}},onClick(e){e.stopPropagation()},exit:{scale:[1,1.05,0],transition:{scale:{duration:.6}}},whileDrag:{scale:1.4,rotate:5,cursor:"grabbing"},whileHover:N?{scale:1.3,rotate:-5,cursor:"grab"}:void 0,className:p()(y?"pointer-events-none":"pointer-events-auto","absolute max-w-none flex-shrink-0 z-20 select-none"),style:{width:"".concat(96,"px"),height:"".concat(96,"px")},onDragStart(e){N&&requestAnimationFrame(()=>{C.isDragging=!0})},onDragEnd(e){var t,n;if(!N)return;requestAnimationFrame(()=>{C.isDragging=!1});let a=null===(t=C.lunchboxRefs[o])||void 0===t?void 0:t.div;if(!a||!g.current)return;let i=el(g.current,a);if(i){v();let s=ei(h.id,o);if(!s){let r=null===(n=C.lunchboxScenes[o])||void 0===n?void 0:n.items.find(e=>e.id===h.id);if(!r)return;r.y=(0,T.clamp)(r.y,40,80)}}else b()},children:(0,a.jsx)(ep,{item:h.item,ref:g})},"".concat(o,"#").concat(h.id))},eh=i.forwardRef((e,t)=>{let{color:n="currentColor",style:i,className:s,...r}=e;return(0,a.jsx)("svg",{viewBox:"0 0 32 32",style:{width:32,height:32,...i},...r,ref:t,fill:"none",className:s,xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M20.5 26L10.5 16L20.5 6",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});eh.displayName="CaretIcon";let ex=e=>{let{metadata:t,size:n,onClick:i}=e;return(0,a.jsx)("div",{className:p()("border-2 rounded-xl border-black flex-shrink-0",i?"pointer-events-auto cursor-pointer hover:scale-105 transition-transform":"pointer-events-none","lg"===n?"w-40 md:w-32 h-40 md:h-32":"w-12 md:w-16 h-12 md:h-16"),onClick:i,children:t&&(0,a.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-xl select-none"})})},ef=e=>{let{metadata:t,description:n,stableWidth:i}=e;return(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[t&&(0,a.jsx)(ex,{metadata:t}),(0,a.jsxs)("div",{className:p()(i?"w-[150px] md:w-[190px]":void 0,"flex flex-col justify-start items-start gap-1 pointer-events-none"),children:[(0,a.jsxs)("div",{className:"heading-h6 md:heading-h4 whitespace-nowrap",children:[" Lunchbox #",null==t?void 0:t.id]}),n&&(0,a.jsx)("div",{className:"component-responsive text-black/40",children:n})]})]})},eg=e=>{let{metadata:t,selectedIndex:n,setSelectedIndex:i}=e,s=(0,S.RK)(C).lunchboxIds;return(0,a.jsxs)("div",{className:"flex gap-4 items-center justify-center",children:[(0,a.jsx)(b.z,{variant:"transparent",onClick(){i((0,T.clamp)(n-1,0,s.length-1))},className:p()(n>0?"cursor-pointer":"opacity-[0] cursor-default","w-8 md:w-14 h-8 md:h-14 flex items-center justify-center flex-shrink-0 pointer-events-auto"),style:{padding:0},children:(0,a.jsx)(eh,{color:"black"})}),(0,a.jsx)(ef,{metadata:t,description:"".concat(n+1," of ").concat(s.length," Lunchboxes"),stableWidth:!0}),(0,a.jsx)(b.z,{variant:"transparent",className:p()(n<s.length-1?"cursor-pointer":"opacity-[0] cursor-default","w-8 md:w-14 h-8 md:h-14 flex items-center justify-center flex-shrink-0 -ml-4 pointer-events-auto"),onClick(){i((0,T.clamp)(n+1,0,s.length-1))},style:{padding:0},children:(0,a.jsx)(eh,{color:"black",className:"rotate-180"})})]})};var ev=n(60153);let eb=e=>{var t,n,i,s;let{lunchboxId:r,dragConstraints:l,draggable:o,withLayoutAnimation:d}=e,u=null!==(i=null===(t=(0,S.RK)(C.lunchboxScenes)[r])||void 0===t?void 0:t.items)&&void 0!==i?i:[],c=null!==(s=null===(n=(0,S.RK)(C.lunchboxScenes)[r])||void 0===n?void 0:n.selections)&&void 0!==s?s:{},p=Object.values(c).filter(e=>e).length;return(0,a.jsx)(a.Fragment,{children:u.filter(e=>c[e.id]).map((e,t)=>(0,a.jsx)(ew,{lunchboxId:r,item:e,i:t,numSelections:p,dragConstraints:l,draggable:o,withLayoutAnimation:d},"".concat(r,"#").concat(e.id)))})},ew=e=>{var t,n,s;let{lunchboxId:l,item:o,i:d,dragConstraints:u,numSelections:c,draggable:p,withLayoutAnimation:m}=e,y=(0,ev.o)(),h=null!==(s=null===(t=(0,S.RK)(C.lunchboxScenes)[l])||void 0===t?void 0:t.selections)&&void 0!==s?s:{},[x]=(0,A.cT)("/sounds/rising-pops.mp3",{volume:.5,playbackRate:1+.2*Object.values(h).filter(e=>e).length}),[f]=(0,A.cT)("/sounds/typewriter.mp3",{volume:.5,playbackRate:1+.1*Object.values(h).filter(e=>e).length}),[g]=(0,A.cT)("/sounds/pop-down.mp3",{volume:.25}),[v]=(0,A.cT)("/sounds/switch-on.mp3",{volume:.25}),b=Boolean(null===(n=(0,S.RK)(C.lunchboxScenes)[l])||void 0===n?void 0:n.selections[o.id]),w=(0,i.useRef)(null),j=(0,i.useRef)({x:0,y:0}),N=(0,S.RK)(C).tableShakeTimestamp,k=(0,W._)();if((0,i.useEffect)(()=>{k.start({y:[0,-5,-1,(0,T.random)(0,5)],x:(0,T.random)(-3,3)},{duration:.5})},[k,N]),!b)return null;let I=35,E=52;return 2===c&&(I=0===d?19:42,E=0===d?53:45),3===c&&(I=0===d?12:1===d?58:33,E=0===d?53:1===d?44:47),4===c&&(I=0===d?12:1===d?62:2===d?40:30,E=0===d?54:1===d?45:2===d?46:53),(0,a.jsx)(r.E.div,{className:"absolute select-none",layoutId:m?"".concat(l,"#").concat(o.id):void 0,style:{left:"".concat(I,"%"),top:"".concat(E,"%"),zIndex:E,scale:1,width:"30%",height:"30%"},animate:k,drag:p,onPointerDown(e){var t;let n=null===(t=w.current)||void 0===t?void 0:t.getBoundingClientRect();if(!n)return;let a=e.clientX-(n.x+n.width/2),i=e.clientY-(n.y+n.height/2);j.current={x:a,y:i},y.start(e)},onMouseOver:()=>v(),onMouseDown:()=>g(),dragControls:y,whileDrag:{zIndex:200,scale:1.5,rotate:5,cursor:"grabbing"},whileHover:{scale:1.1,rotate:-5,cursor:"grab"},dragConstraints:u,dragSnapToOrigin:!0,onDragStart(){requestAnimationFrame(()=>{C.isDragging=!0})},onDragEnd(e,t){var n,a;requestAnimationFrame(()=>{C.isDragging=!1});let i=C.lunchboxScenes[l],s=null===(n=C.lunchboxRefs[l])||void 0===n?void 0:n.div,r=null===(a=u.current)||void 0===a?void 0:a.getBoundingClientRect();if(!i||!s||!w.current||!r)return;let d=el(w.current,s);if(d)x();else{f();let c=(t.point.x-r.x-j.current.x)/r.width*100,p=(t.point.y-r.y-j.current.y)/r.height*100,m=i.items.find(e=>e.id===o.id);m&&(m.x=c-48/r.width*100,m.y=(0,T.clamp)(p-48/r.height*100,40,80)),es(o.id,l)}},children:(0,a.jsx)(ep,{item:o.item,ref:w})})},ej=e=>{let{lunchboxId:t,dragConstraints:n,onClick:i,draggable:s,className:r,withLayoutAnimation:l,closed:o}=e;return(0,a.jsxs)("div",{className:p()(r,"relative left-1/2 -translate-x-1/2 inset-0 pointer-events-auto hover-scale hover:scale-105  hover:rotate-3 transition-transform"),onClick(e){e.stopPropagation(),i()},style:{zIndex:k.LUNCHBOX},children:[o&&(0,a.jsx)("img",{src:"/lunchbox-closed.gif",className:"absolute left-0 right-0 top-0 w-full pointer-events-none select-none",style:{zIndex:101},alt:"lunchbox front"}),(0,a.jsx)("img",{src:o?"closed-lunchbox-bottom.png":"/open-lunchbox.png",className:"w-full h-full pointer-events-none select-none",ref(e){e&&(C.lunchboxRefs[t]={div:e})},alt:"lunchbox"}),(0,a.jsx)("img",{src:"/lunchbox-front.png",className:"absolute left-0 right-0 top-0 pointer-events-none select-none",style:{zIndex:100},alt:"lunchbox front"}),(0,a.jsx)(eb,{lunchboxId:t,dragConstraints:n,draggable:s,withLayoutAnimation:l})]},t)},eT=e=>{let{selectedLunchboxId:t,tableControls:n,itemShakeControls:a}=e,s=(0,i.useRef)([]),[r]=(0,A.cT)("/sounds/shake.mp3",{volume:.5,playbackRate:1}),[l]=(0,A.cT)("/sounds/blast.mp3",{volume:.2,playbackRate:1});return()=>{if(C.isDragging||void 0===t)return;if(s.current.length){let e=eu(t);s.current=[],e>0&&l()}else r();a.start("shake");let i=n.start({x:0,rotate:[0,2,-2,1,-1,.5,-.5,0],transition:{duration:.6}}).then(()=>{s.current=[]});C.tableShakeTimestamp=Date.now(),s.current=[i]}},eA=e=>{var t,n;let{incomepleteLunchboxIds:i,metadata:s,onClose:r}=e;return(0,a.jsx)(O.Q,{isOpen:!0,setIsOpen:()=>r(null!==(t=i[0])&&void 0!==t?t:null),children:(0,a.jsx)(F,{title:"Hey! You are missing some elements.",description:"The following lunchboxes have missing components:",buttons:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(b.z,{variant:"secondary",size:"narrow",onClick:()=>r(null!==(n=i[0])&&void 0!==n?n:null),children:"Select Elements"})}),children:(0,a.jsx)("div",{className:"flex gap-2 max-w-full overflow-x-auto overflow-y-hidden px-2 justify-start",children:i.map(e=>{let t=null==s?void 0:s.find(t=>String(t.id)===e);return(0,a.jsxs)("div",{className:"mt-4",children:[t&&(0,a.jsx)(ex,{metadata:t,size:"lg",onClick:()=>r(e)}),(0,a.jsxs)("div",{className:"component-narrow mt-4 mb-1",children:["Lunchbox #",e]})]},e)})})})})},eN=e=>{let{open:t,lunchboxesMetadata:n}=e,s=(0,i.useRef)(null),r=(0,S.RK)(C).lunchboxIds,l=Object.entries((0,S.RK)(C).lunchboxScenes).filter(e=>{let[t,a]=e,i=null==n?void 0:n.find(e=>String(e.id)===t);return Boolean(i)&&r.includes(t)}),o=(0,T.clamp)(3,1,l.length),d=l.length>1?"w-[350px]":"w-[400px]";return(0,a.jsx)("div",{ref:s,className:"grid grid-cols-1 ".concat(1===o?"lg:grid-cols-1":2===o?"lg:grid-cols-2":"lg:grid-cols-3"," gap-8 justify-center mt-16 mx-6"),children:l.map((e,i,r)=>{let[l,o]=e,u=null==n?void 0:n.find(e=>String(e.id)===l);return u?(0,a.jsxs)("div",{className:p()(i%3==0?"":"lg:border-l-2","flex flex-col justify-center items-center flex-wrap gap-8 ".concat(d," max-w-full px-8 pb-16 border-l-gray-300")),children:[(0,a.jsx)(ej,{lunchboxId:l,dragConstraints:s,onClick(){},draggable:!1,withLayoutAnimation:!1,className:"w-full",closed:!t}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2 md:gap-4",children:[(0,a.jsx)(ef,{metadata:u}),(0,a.jsx)("div",{className:"flex flex-col w-full",children:o.items.filter(e=>o.selections[e.id]).map(e=>(0,a.jsxs)("div",{className:"flex gap-2 md:gap-3 h-full items-center component-responsive",children:[(0,a.jsx)("div",{className:"h-12 w-12",children:(0,a.jsx)(ep,{item:e.item})}),en.Ic[e.item]]},e.id))})]})]},l):null})})},ek=e=>{let{onBack:t}=e,n=v(),l=(0,S.RK)(C).lunchboxIds,[o,d]=(0,i.useState)("SELECT"),[c,y]=(0,i.useState)(null),{burnLunchboxes:f,isPendingWalletConfirmation:g,isTransactionPending:w,isSignaturePending:j,isLoadingMetadata:T,error:A,reset:N}=function(e){let{signMessageAsync:t,isLoading:n}=(0,m.QW)({onError(){c("Please accept the wallet signature.")}}),{address:a}=(0,u.a)(),s=(0,Y.useRouter)(),r=(0,J.t)(),[{data:l},o]=(0,G.i)(async()=>{let e=await (0,h.v)("/api/humankind",{address:a});if(e&&r()){let t=e[e.length-1];s.push("/profile/".concat(a,"?token=").concat(t))}return e},[a]),[d,c]=i.useState(),[p,y]=i.useState({tokenIds:[]}),{config:f}=(0,m.PJ)({address:x.rw,abi:V,functionName:"lunchTime",args:[p.tokenIds,p.signature],enabled:!!p.signature,chainId:x.Kj,onError(e){(0,Z.h)({address:a,message:"(Prepare) Burn: Received mint signature: ".concat(!!p.signature," | tokens: ").concat(p.tokenIds.join(",")," | ").concat(e.message),description:e.stack||"No error stack",url:window.location.href,type:"error"})}}),g=i.useRef(!1),{data:v,write:b,isLoading:w}=(0,m.GG)({...f,onError(e){"code"in e&&"ACTION_REJECTED"===e.code?c("You rejected the transaction"):(c("There was an error minting your Humankind. Error message: '"+e.message.slice(0,100)+"'."),(0,Z.h)({address:a,message:"(Execute) Burn: Received mint signature: ".concat(!!p.signature," | tokens: ").concat(p.tokenIds.join(",")," | ").concat(e.message),description:e.stack||"No error stack",url:window.location.href,type:"error"}))},onSettled(){g.current=!1},onSuccess:T}),{isLoading:j}=(0,m.BX)({hash:null==v?void 0:v.hash,onSettled:T});async function T(){c(void 0),g.current=!1}async function A(e){let n=Object.keys(e).length>1,i="Sign this message to begin the burn process for your Lunchbox".concat(n?"es":"","."),s=await t({message:i});if(!s)throw Error("Invalid signature");try{let r=await (0,h.v)("/api/burn",{address:a,signature:s,message:i,selections:e});if(!r.signature)throw Error("Failed to fetch mint signature");y({tokenIds:r.payload,signature:r.signature}),g.current=!0}catch(l){c(l instanceof Error?l.message:"An unexpected error occurred.")}}(0,m.y2)({address:x.rw,abi:V,eventName:"TokensMinted",listener(t,n,i){t===a&&(o().then(()=>(0,Z.h)({address:a,type:"burn",tokenIds:p.tokenIds})),null==e||e.onSuccess())}}),i.useEffect(()=>{!w&&b&&g.current&&b()},[b,w]);let N=!!(null==v?void 0:v.hash)&&!l&&!j;return{burnLunchboxes:A,isPendingWalletConfirmation:w,isTransactionPending:j,isSignaturePending:n,isLoadingMetadata:N,error:d,reset:T}}({onSuccess(){E()}}),[k,I]=(0,i.useState)(0),M=(0,i.useRef)(null),L=(0,i.useRef)(null),R=(0,i.useRef)(null),z=l[k],D=(0,W._)(),_=(0,W._)(),P=eT({selectedLunchboxId:z,tableControls:D,itemShakeControls:_}),[Q,U]=(0,i.useState)(0),K=(0,X.y1)(()=>{U(Math.random())},100,{maxWait:300});(0,i.useEffect)(()=>{function e(){K()}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let H=null==n?void 0:n.find(e=>String(e.id)===z);(0,i.useEffect)(()=>{if(void 0===z)return;let e=C.lunchboxScenes[z];e&&0!==e.items.length||eu(z)},[z]);let ee=()=>{if("SELECT"===o){let e=l.map(e=>[e,C.lunchboxScenes[e]]),t=e.filter(e=>{let[t,n]=e;return!n||!eo(n)}).map(e=>e[0]);t.length?y(t):d("CONFIRM")}"CONFIRM"===o&&(d("VIEW"),f(ec()))},et=()=>{"SELECT"===o&&t(),"CONFIRM"===o&&d("SELECT"),"VIEW"===o&&d("CONFIRM")};return(0,a.jsxs)("div",{className:p()("SELECT"===o&&"h-screen","w-screen flex flex-col items-center justify-center select-none"),children:[c&&(0,a.jsx)(eA,{incomepleteLunchboxIds:c,metadata:n,onClose(e){y(null),e&&I(l.indexOf(e))}}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-[430px] max-w-full h-[20%] mt-[60px] md:mt-[80px] mb-2 select-none",children:[(0,a.jsx)("h1",{className:"heading-h4 md:heading-h3",children:"SELECT"===o?"Fill up your lunchbox!":"View your selection"}),(0,a.jsx)("div",{className:"body-default md:body-large w-[300px] md:w-[400px] max-w-full mt-2",children:"SELECT"===o?"Choose wisely! The kind of stuff you put in the box affects what type of Kind you’ll get.":"Check your selection, remember that what you select will affect the type of kind you get."})]}),(0,a.jsxs)("div",{className:"relative flex flex-col flex-grow items-center justify-center min-h-[80%] min-w-full pb-24",children:[g?(0,a.jsx)(O.Q,{isOpen:!0,children:(0,a.jsx)(F,{title:"Pending Wallet Confirmation",description:"Please accept the wallet confirmation to continue.",illustration:{image:$,alt:"Waiting"}})}):w||T?(0,a.jsx)(O.Q,{isOpen:!0,children:(0,a.jsx)(F,{title:"Mint in Progress",description:"You're close to getting your Humankind!",illustration:{image:q,alt:"Waiting"}})}):A?(0,a.jsx)(O.Q,{isOpen:!0,onClose:N,children:(0,a.jsx)(F,{title:"Error!",description:A,illustration:{image:B,alt:"Error"},buttons:(0,a.jsx)(b.z,{variant:"secondary",size:"narrow",onClick(){N(),d("CONFIRM")},children:"Ok"})})}):null,("CONFIRM"===o||"VIEW"==o)&&n&&(0,a.jsx)(eN,{open:"CONFIRM"===o,lunchboxesMetadata:n}),"SELECT"===o&&(0,a.jsxs)("div",{ref:L,className:p()("w-[833px] max-w-[130vmax] h-full max-h-[500px] bg-no-repeat relative z-10"),onClick:P,children:[(0,a.jsx)(r.E.div,{animate:D,style:{backgroundImage:"url(/table.png)",backgroundSize:"100% auto",backgroundPosition:"top 110px center"},className:"pointer-events-none absolute inset-0 bg-no-repeat",children:(0,a.jsx)(s.M,{initial:!1,children:l.map((e,t)=>{let n=t===k;return(0,a.jsx)(r.E.div,{layoutId:e,className:"w-full h-full absolute pointer-events-none",initial:{left:"0",opacity:0},animate:{left:n?"0":t<k?"-100vw":"100vw",opacity:n?1:0,transition:{left:{type:"spring",stiffness:80,damping:15}}},exit:{left:"150vw",opacity:0,transition:{ease:"easeOut",duration:1.5}},children:(0,a.jsx)(ej,{lunchboxId:e,dragConstraints:M,onClick:P,draggable:!0,className:"w-[30%]",withLayoutAnimation:!0})},e)})})}),(0,a.jsx)("div",{ref:M,className:"pointer-events-none absolute inset-0"}),(0,a.jsx)("div",{ref:R,className:"absolute w-full left-0 top-[140px] bottom-0 pointer-events-none"}),(0,a.jsx)(s.M,{children:l.map(e=>z!==e?null:(0,a.jsx)(em,{lunchboxId:e,dragConstraints:R,animationControls:_},e))})]})]}),(0,a.jsx)("div",{className:"flex md:hidden justify-center fixed bottom-16 pb-4 pointer-events-none w-screen bg-white/80 z-[300]",style:{zIndex:1e3},children:en()}),(0,a.jsx)("div",{className:p()("h-16 md:h-auto fixed bottom-0 inset-x-0 duration-300 transition-transform bg-white footer-shadow z-[300]"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 sm:px-6 py-3 w-full max-w-[923px] mx-auto",children:[(0,a.jsx)("div",{className:"component-responsive md:heading-h4 text-left md:text-center",children:(0,a.jsx)(b.z,{onClick:et,variant:"disabled",className:"whitespace-pre",size:"responsive",children:"Back"})}),(0,a.jsx)("div",{className:"hidden md:flex",children:en()}),(0,a.jsx)("div",{className:"flex gap-2",children:!T&&!w&&(0,a.jsx)(b.z,{onClick:ee,variant:"primary",className:"whitespace-pre",disabled:j||g||"VIEW"===o,size:"responsive",children:"SELECT"===o?"Continue":j?"Pending Wallet Signature":g?"Pending Wallet Confirmation":"CONFIRM"===o?"Confirm":"Please wait..."})})]})})]},Q);function en(){return H&&"SELECT"===o?(0,a.jsx)(eg,{metadata:H,selectedIndex:k,setSelectedIndex:I}):null}};var eI=n(5902);let eE=["SELECT_LUNCHBOXES","FILL_LUNCHBOXES"],eC=()=>{let e=(0,d.h)();(0,l.a)();let[t,n]=(0,i.useState)(0),c=eE[t],{address:p}=(0,u.a)(),m=()=>{n((0,eI.u)(t+1,0,eE.length-1))},y=()=>{n((0,eI.u)(t-1,0,eE.length-1))},[h,{pause:x}]=(0,A.cT)("/sounds/lofi-1.mp3",{volume:.2,interrupt:!0,loop:!0});(0,i.useEffect)(()=>(h(),x),[h,x]);let f=Boolean(p);return(0,a.jsxs)(o.V,{children:[(0,a.jsx)(s.M,{initial:!e,children:!p&&(0,a.jsx)(U,{scaleDuration:1.5})}),p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(s.M,{initial:!e,mode:"wait",children:["SELECT_LUNCHBOXES"===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H,{dontAnimate:e,imageIsSmall:f&&"SELECT_LUNCHBOXES"===c,scaleDuration:1.5},"tree"),p&&f&&(0,a.jsx)(r.E.div,{className:"flex justify-center items-center flex-col gap-3 text-center",initial:{opacity:0},animate:{opacity:1,transition:{delay:1.8}},exit:{opacity:0,transition:{delay:0,duration:1}},children:(0,a.jsx)(P,{onContinue:m})},"selector")]}),"FILL_LUNCHBOXES"===c&&(0,a.jsx)(r.E.div,{className:"flex justify-center items-center flex-col gap-3 text-center",initial:{opacity:0},animate:{opacity:1,transition:{delay:0,duration:1}},exit:{opacity:0},children:(0,a.jsx)(ek,{onBack:y})},"filler")]})})]})};var eS=eC}},function(e){e.O(0,[662,949,383,224,257,319,774,888,179],function(){return e(e.s=17537)}),_N_E=e.O()}]);